
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Gui Registry &amp; Custom Types &#8212; Fiatlight</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'fiat_togui';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fiatlight Kits" href="fiat_kits.html" />
    <link rel="prev" title="FunctionsGraph" href="functions_graph.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.jpg" class="logo__image only-light" alt="Fiatlight - Home"/>
    <script>document.write(`<img src="_static/logo.jpg" class="logo__image only-dark" alt="Fiatlight - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Fiatlight: Brighten the Journey from Idea to Creation
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="imgui_tech_stack.html">A Mature Tech stack on top of Dear ImGui</a></li>




<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorials.html">Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials_first.html">First Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_cli.html">fiatlight command line utility: explore the available widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_validation.html">Validate function inputs with Fiatlight</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_advanced.html">Advanced Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_new_widget.html">How to create a fully customizable new widget.</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_demos.html">Run the demos</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="api.html">API</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="function_with_gui.html">FunctionWithGui</a></li>







<li class="toctree-l2"><a class="reference internal" href="any_data_with_gui.html">AnyDataWithGui</a></li>
<li class="toctree-l2"><a class="reference internal" href="any_data_gui_callbacks.html">AnyDataGuiCallbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions_graph.html">FunctionsGraph</a></li>



<li class="toctree-l2 current active"><a class="current reference internal" href="#">Gui Registry &amp; Custom Types</a></li>











</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="fiat_kits.html">Fiatlight Kits</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="fiat_image.html">fiat_image: advanced image widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="fiat_matplotlib.html">fiat_matplotlib: display matplotlib figures</a></li>
<li class="toctree-l2"><a class="reference internal" href="fiat_dataframe.html">fiat_dataframe: pandas DataFrame explorer</a></li>
<li class="toctree-l2"><a class="reference internal" href="fiat_implot.html">fiat_implot: widget for 1D and 2D numpy arrays</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Fiatlight Architecture</a></li>


<li class="toctree-l1 has-children"><a class="reference internal" href="comparisons.html">Comparisons w. other frameworks</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="comparison_streamlit.html">Comparison with Streamlit</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison_dash.html">Comparison with Dash</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparison_ipywidgets.html">Comparison with Jupyter Lab and ipywidgets</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="rosetta.html">The Rosetta Challenge</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/pthom/fiatlight" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/pthom/fiatlight/issues/new?title=Issue%20on%20page%20%2Ffiat_togui.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/fiat_togui.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Gui Registry & Custom Types</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Gui Registry &amp; Custom Types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-the-registry">Explore the registry</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#primitive-types">Primitive types</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-example">Basic example</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-with-custom-gui-options">Example with custom GUI options</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#range-limited-numeric-types">Range limited numeric types</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#file-name-types">File name types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#color-types">Color types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#optional-types">Optional types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lists">Lists</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-classes">Enum classes</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dataclasses">Dataclasses</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pydantic-models">Pydantic models</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-types-registration">Custom types registration</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-a-customizable-normal-distribution-type">Example 1: a customizable Normal Distribution type</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-a-length-type-with-imperial-units">Example 2: a Length type with imperial units</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-3-a-sound-player">Example 3: a sound player</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#full-code">Full code</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="gui-registry-custom-types">
<h1>Gui Registry &amp; Custom Types<a class="headerlink" href="#gui-registry-custom-types" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">fiatlight.fiat_togui</span></code> is the central module that is able to associate a GUI with a type.</p>
<p>It uses sophisticated mechanisms to inspect the type of function parameters and return values.</p>
<p>It handles a registry of types and their associated GUIs, to which you can add your own types, by calling<code class="docutils literal notranslate"> <span class="pre">fiatlight.register_type(DataType,</span> <span class="pre">DataTypeWithGui)</span></code>, where <code class="docutils literal notranslate"><span class="pre">DataType</span></code> is the type you want to register, and <code class="docutils literal notranslate"><span class="pre">DataTypeWithGui</span></code> is the class that will handle the GUI for this type.</p>
<p><code class="docutils literal notranslate"><span class="pre">DataTypeWithGui</span></code> must inherit from <code class="docutils literal notranslate"><span class="pre">AnyDataWithGui</span></code> and implement the necessary callbacks.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="explore-the-registry">
<h1>Explore the registry<a class="headerlink" href="#explore-the-registry" title="Link to this heading">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">fiatlight</span></code> command line utility is a powerful tool that allows you to explore the available widgets and types in Fiatlight. It can be used to list the available types, to print the GUI info for a given type, and to run a GUI demo for a given type.</p>
<p>Here is the help message for the <code class="docutils literal notranslate"><span class="pre">fiatlight</span></code> command line utility:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
fiatlight --help
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>INFO: Showing help with the command &#39;fiatlight -- --help&#39;.

<span class=" -Color -Color-Bold">NAME</span>
    fiatlight

<span class=" -Color -Color-Bold">SYNOPSIS</span>
    fiatlight COMMAND

<span class=" -Color -Color-Bold">COMMANDS</span>
    <span class=" -Color -Color-Bold">COMMAND</span> is one of the following:

     types
       List registered types, with a possible query to filter them. Add an optional query to filter the types.

     gui
       Print the GUI info for a given type. Add the GUI type name as an argument (if not provided, all Gui widgets names are printed)
</pre></div>
</div>
</div>
</div>
<p>See the page <a class="reference internal" href="tutorials_cli.html"><span class="std std-doc">Tutorials/fiatlight command line utility</span></a> for more information.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="primitive-types">
<h1>Primitive types<a class="headerlink" href="#primitive-types" title="Link to this heading">#</a></h1>
<p>The primitive types <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code> are registered by default.</p>
<section id="basic-example">
<h2>Basic example<a class="headerlink" href="#basic-example" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span> <span class="n">times_two</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="k">if</span> <span class="n">times_two</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Run an app that displays the GUI for the function</span>
<span class="c1"># where the user can input the values of the parameters</span>
<span class="c1"># (or use the default values)</span>
<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Primitive Basic&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/743dcbe913cc312b68b9c36456c259fe83b1d316878641f2509710cc8225cf41.png" src="_images/743dcbe913cc312b68b9c36456c259fe83b1d316878641f2509710cc8225cf41.png" />
</div>
</div>
</section>
<section id="example-with-custom-gui-options">
<h2>Example with custom GUI options<a class="headerlink" href="#example-with-custom-gui-options" title="Link to this heading">#</a></h2>
<p>The GUI of primitive is extensively configurable via custom attributes.</p>
<p>See <a class="reference internal" href="function_with_gui.html"><span class="doc std std-doc">FunctionWithGui</span></a> for a comprehensive list of all the available attributes (in the “Customizing parameters GUI” section).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>


<span class="nd">@fl</span><span class="o">.</span><span class="n">with_fiat_attributes</span><span class="p">(</span><span class="n">celsius__range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">celsius__format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%.1f</span><span class="s2"> °C&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">to_fahrenheit</span><span class="p">(</span><span class="n">celsius</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">celsius</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">/</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">32</span>


<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">to_fahrenheit</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Primitive Custom&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/5ed374dac6bd6a266412530d64ff347594acd2593ca8f001250db9fe0af6548e.png" src="_images/5ed374dac6bd6a266412530d64ff347594acd2593ca8f001250db9fe0af6548e.png" />
</div>
</div>
</section>
<section id="range-limited-numeric-types">
<h2>Range limited numeric types<a class="headerlink" href="#range-limited-numeric-types" title="Link to this heading">#</a></h2>
<p>As a convenience, Fiatlight includes those predefined types for which the GUI will take into account their boundings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NewType</span>

<span class="c1"># Float types with specific ranges (bounds included)</span>
<span class="n">Float_0_1</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float_0_1&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># 0 to 1</span>
<span class="n">Float_0_2</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float_0_2&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># 0 to 1</span>
<span class="n">Float_0_3</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float_0_3&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># 0 to 1</span>
<span class="n">Float__1_1</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float__1_1&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># -1 to 1</span>
<span class="n">Float_0_10</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float_0_10&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># 0 to 10</span>
<span class="n">Float_0_100</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float_0_100&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># 0 to 100</span>
<span class="n">Float_0_1000</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float_0_1000&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># 0 to 1000</span>
<span class="n">Float_0_10000</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Float_0_10000&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># 0 to 10000</span>
<span class="n">PositiveFloat</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;PositiveFloat&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># Any positive float ( strictly greater than 0)</span>

<span class="c1"># Int types with specific ranges (bounds included)</span>
<span class="n">Int_0_10</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Int_0_10&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># 0 to 10</span>
<span class="n">Int_0_255</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Int_0_255&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># 0 to 255</span>
<span class="n">Int_0_100</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Int_0_100&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># 0 to 100</span>
<span class="n">Int_0_1000</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Int_0_1000&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># 0 to 100</span>
<span class="n">Int_0_10000</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Int_0_10000&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># 0 to 100</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="file-name-types">
<h1>File name types<a class="headerlink" href="#file-name-types" title="Link to this heading">#</a></h1>
<p>Several file types names are registered by default. They are synonyms for <code class="docutils literal notranslate"><span class="pre">str</span></code> and are used to specify file paths.
They will be presented with a file dialog in the GUI.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fiatlight.fiat_doc</span> <span class="kn">import</span> <span class="n">look_at_code</span>
<span class="o">%</span><span class="k">look_at_python_code</span> fiatlight.fiat_types.file_types
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.output_html .hll { background-color: #ffffcc }
.output_html { background: #f8f8f8; }
.output_html .c { color: #3D7B7B; font-style: italic } /* Comment */
.output_html .err { border: 1px solid #FF0000 } /* Error */
.output_html .k { color: #008000; font-weight: bold } /* Keyword */
.output_html .o { color: #666666 } /* Operator */
.output_html .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.output_html .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.output_html .cp { color: #9C6500 } /* Comment.Preproc */
.output_html .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.output_html .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.output_html .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.output_html .gd { color: #A00000 } /* Generic.Deleted */
.output_html .ge { font-style: italic } /* Generic.Emph */
.output_html .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.output_html .gr { color: #E40000 } /* Generic.Error */
.output_html .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.output_html .gi { color: #008400 } /* Generic.Inserted */
.output_html .go { color: #717171 } /* Generic.Output */
.output_html .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.output_html .gs { font-weight: bold } /* Generic.Strong */
.output_html .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.output_html .gt { color: #0044DD } /* Generic.Traceback */
.output_html .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.output_html .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.output_html .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.output_html .kp { color: #008000 } /* Keyword.Pseudo */
.output_html .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.output_html .kt { color: #B00040 } /* Keyword.Type */
.output_html .m { color: #666666 } /* Literal.Number */
.output_html .s { color: #BA2121 } /* Literal.String */
.output_html .na { color: #687822 } /* Name.Attribute */
.output_html .nb { color: #008000 } /* Name.Builtin */
.output_html .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.output_html .no { color: #880000 } /* Name.Constant */
.output_html .nd { color: #AA22FF } /* Name.Decorator */
.output_html .ni { color: #717171; font-weight: bold } /* Name.Entity */
.output_html .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.output_html .nf { color: #0000FF } /* Name.Function */
.output_html .nl { color: #767600 } /* Name.Label */
.output_html .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.output_html .nt { color: #008000; font-weight: bold } /* Name.Tag */
.output_html .nv { color: #19177C } /* Name.Variable */
.output_html .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.output_html .w { color: #bbbbbb } /* Text.Whitespace */
.output_html .mb { color: #666666 } /* Literal.Number.Bin */
.output_html .mf { color: #666666 } /* Literal.Number.Float */
.output_html .mh { color: #666666 } /* Literal.Number.Hex */
.output_html .mi { color: #666666 } /* Literal.Number.Integer */
.output_html .mo { color: #666666 } /* Literal.Number.Oct */
.output_html .sa { color: #BA2121 } /* Literal.String.Affix */
.output_html .sb { color: #BA2121 } /* Literal.String.Backtick */
.output_html .sc { color: #BA2121 } /* Literal.String.Char */
.output_html .dl { color: #BA2121 } /* Literal.String.Delimiter */
.output_html .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.output_html .s2 { color: #BA2121 } /* Literal.String.Double */
.output_html .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.output_html .sh { color: #BA2121 } /* Literal.String.Heredoc */
.output_html .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.output_html .sx { color: #008000 } /* Literal.String.Other */
.output_html .sr { color: #A45A77 } /* Literal.String.Regex */
.output_html .s1 { color: #BA2121 } /* Literal.String.Single */
.output_html .ss { color: #19177C } /* Literal.String.Symbol */
.output_html .bp { color: #008000 } /* Name.Builtin.Pseudo */
.output_html .fm { color: #0000FF } /* Name.Function.Magic */
.output_html .vc { color: #19177C } /* Name.Variable.Class */
.output_html .vg { color: #19177C } /* Name.Variable.Global */
.output_html .vi { color: #19177C } /* Name.Variable.Instance */
.output_html .vm { color: #19177C } /* Name.Variable.Magic */
.output_html .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NewType</span>


<span class="c1"># FilePath is a synonym of str, but when used as a function parameter,</span>
<span class="c1"># it will be displayed as a widget where you can select a file.</span>
<span class="n">FilePath</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;FilePath&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="n">FilePath</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing a file path (NewType)&quot;</span>
<span class="c1"># FilePath_Save is a synonym of str, but when used as a function parameter,</span>
<span class="c1"># it will be displayed as a widget where you can select a file to save to.</span>
<span class="n">FilePath_Save</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;FilePath_Save&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="n">FilePath_Save</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing a file path for saving (NewType)&quot;</span>

<span class="c1"># With ImagePath, you can select an image file.</span>
<span class="n">ImagePath</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;ImagePath&quot;</span><span class="p">,</span> <span class="n">FilePath</span><span class="p">)</span>
<span class="n">ImagePath</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing an image file path (NewType)&quot;</span>
<span class="n">ImagePath_Save</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;ImagePath_Save&quot;</span><span class="p">,</span> <span class="n">FilePath_Save</span><span class="p">)</span>
<span class="n">ImagePath_Save</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing an image file path for saving (NewType)&quot;</span>

<span class="c1"># With TextPath, you can select a text file.</span>
<span class="n">TextPath</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;TextPath&quot;</span><span class="p">,</span> <span class="n">FilePath</span><span class="p">)</span>
<span class="n">TextPath</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing a text file path (NewType)&quot;</span>
<span class="n">TextPath_Save</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;TextPath_Save&quot;</span><span class="p">,</span> <span class="n">FilePath_Save</span><span class="p">)</span>
<span class="n">TextPath_Save</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing a text file path for saving (NewType)&quot;</span>

<span class="c1"># With AudioPath, you can select an audio file.</span>
<span class="n">AudioPath</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;AudioPath&quot;</span><span class="p">,</span> <span class="n">FilePath</span><span class="p">)</span>
<span class="n">AudioPath</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing an audio file path (NewType)&quot;</span>
<span class="n">AudioPath_Save</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;AudioPath_Save&quot;</span><span class="p">,</span> <span class="n">FilePath_Save</span><span class="p">)</span>
<span class="n">AudioPath_Save</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing an audio file path for saving (NewType)&quot;</span>

<span class="c1"># With VideoPath, you can select a video file.</span>
<span class="n">VideoPath</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;VideoPath&quot;</span><span class="p">,</span> <span class="n">FilePath</span><span class="p">)</span>
<span class="n">VideoPath</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing a video file path (NewType)&quot;</span>
<span class="n">VideoPath_Save</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;VideoPath_Save&quot;</span><span class="p">,</span> <span class="n">FilePath_Save</span><span class="p">)</span>
<span class="n">VideoPath_Save</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for str, describing a video file path for saving (NewType)&quot;</span>
</pre></div>
</div></div>
</div>
<p><em>Example: a pipeline that lets the user select a text file and saves it into another file in lowercase</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">fiatlight.fiat_types</span> <span class="kn">import</span> <span class="n">TextPath</span><span class="p">,</span> <span class="n">TextPath_Save</span>

<span class="k">def</span> <span class="nf">read_text_file</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="n">TextPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span>  <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">save_lower_case_text_file</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="n">TextPath_Save</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># Note: since the filename is optional, the user can choose to not save the file</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="n">read_text_file</span><span class="p">,</span> <span class="n">save_lower_case_text_file</span><span class="p">],</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Read and Save Text File&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ab8d9b0e22348cd9aed269e3d98e61b40d93e1b4e63fbd84baa9ce842444a9be.png" src="_images/ab8d9b0e22348cd9aed269e3d98e61b40d93e1b4e63fbd84baa9ce842444a9be.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="color-types">
<h1>Color types<a class="headerlink" href="#color-types" title="Link to this heading">#</a></h1>
<p>Several color types are registered by default.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">look_at_python_code</span> fiatlight.fiat_types.color_types
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.output_html .hll { background-color: #ffffcc }
.output_html { background: #f8f8f8; }
.output_html .c { color: #3D7B7B; font-style: italic } /* Comment */
.output_html .err { border: 1px solid #FF0000 } /* Error */
.output_html .k { color: #008000; font-weight: bold } /* Keyword */
.output_html .o { color: #666666 } /* Operator */
.output_html .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.output_html .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.output_html .cp { color: #9C6500 } /* Comment.Preproc */
.output_html .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.output_html .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.output_html .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.output_html .gd { color: #A00000 } /* Generic.Deleted */
.output_html .ge { font-style: italic } /* Generic.Emph */
.output_html .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.output_html .gr { color: #E40000 } /* Generic.Error */
.output_html .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.output_html .gi { color: #008400 } /* Generic.Inserted */
.output_html .go { color: #717171 } /* Generic.Output */
.output_html .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.output_html .gs { font-weight: bold } /* Generic.Strong */
.output_html .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.output_html .gt { color: #0044DD } /* Generic.Traceback */
.output_html .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.output_html .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.output_html .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.output_html .kp { color: #008000 } /* Keyword.Pseudo */
.output_html .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.output_html .kt { color: #B00040 } /* Keyword.Type */
.output_html .m { color: #666666 } /* Literal.Number */
.output_html .s { color: #BA2121 } /* Literal.String */
.output_html .na { color: #687822 } /* Name.Attribute */
.output_html .nb { color: #008000 } /* Name.Builtin */
.output_html .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.output_html .no { color: #880000 } /* Name.Constant */
.output_html .nd { color: #AA22FF } /* Name.Decorator */
.output_html .ni { color: #717171; font-weight: bold } /* Name.Entity */
.output_html .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.output_html .nf { color: #0000FF } /* Name.Function */
.output_html .nl { color: #767600 } /* Name.Label */
.output_html .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.output_html .nt { color: #008000; font-weight: bold } /* Name.Tag */
.output_html .nv { color: #19177C } /* Name.Variable */
.output_html .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.output_html .w { color: #bbbbbb } /* Text.Whitespace */
.output_html .mb { color: #666666 } /* Literal.Number.Bin */
.output_html .mf { color: #666666 } /* Literal.Number.Float */
.output_html .mh { color: #666666 } /* Literal.Number.Hex */
.output_html .mi { color: #666666 } /* Literal.Number.Integer */
.output_html .mo { color: #666666 } /* Literal.Number.Oct */
.output_html .sa { color: #BA2121 } /* Literal.String.Affix */
.output_html .sb { color: #BA2121 } /* Literal.String.Backtick */
.output_html .sc { color: #BA2121 } /* Literal.String.Char */
.output_html .dl { color: #BA2121 } /* Literal.String.Delimiter */
.output_html .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.output_html .s2 { color: #BA2121 } /* Literal.String.Double */
.output_html .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.output_html .sh { color: #BA2121 } /* Literal.String.Heredoc */
.output_html .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.output_html .sx { color: #008000 } /* Literal.String.Other */
.output_html .sr { color: #A45A77 } /* Literal.String.Regex */
.output_html .s1 { color: #BA2121 } /* Literal.String.Single */
.output_html .ss { color: #19177C } /* Literal.String.Symbol */
.output_html .bp { color: #008000 } /* Name.Builtin.Pseudo */
.output_html .fm { color: #0000FF } /* Name.Function.Magic */
.output_html .vc { color: #19177C } /* Name.Variable.Class */
.output_html .vg { color: #19177C } /* Name.Variable.Global */
.output_html .vi { color: #19177C } /* Name.Variable.Instance */
.output_html .vm { color: #19177C } /* Name.Variable.Magic */
.output_html .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NewType</span>

<span class="n">ColorRgb</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;ColorRgb&quot;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>
<span class="n">ColorRgb</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for tuple[int, int, int] describing an RGB color, with values in [0, 255] (NewType)&quot;</span>

<span class="n">ColorRgba</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;ColorRgba&quot;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span>
<span class="n">ColorRgba</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;synonym for tuple[int, int, int, int] describing an RGBA color, with values in [0, 255] (NewType)&quot;</span>

<span class="n">ColorRgbFloat</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;ColorRgbFloat&quot;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span>
<span class="n">ColorRgbFloat</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;synonym for tuple[float, float, float] describing an RGB color, with values in [0, 1] (NewType)&quot;</span>
<span class="p">)</span>

<span class="n">ColorRgbaFloat</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;ColorRgbaFloat&quot;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span>
<span class="n">ColorRgbaFloat</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;synonym for tuple[float, float, float, float] describing an RGBA color, with values in [0, 1] (NewType)&quot;</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">_int255_to_float</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">/</span> <span class="mf">255.0</span>


<span class="k">def</span> <span class="nf">_float_to_int255</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">color_rgb_to_color_rgb_float</span><span class="p">(</span><span class="n">color_rgb</span><span class="p">:</span> <span class="n">ColorRgb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ColorRgbFloat</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">ColorRgbFloat</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">_int255_to_float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">color_rgb</span><span class="p">))</span>  <span class="c1"># type: ignore</span>


<span class="k">def</span> <span class="nf">color_rgba_to_color_rgba_float</span><span class="p">(</span><span class="n">color_rgba</span><span class="p">:</span> <span class="n">ColorRgba</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ColorRgbaFloat</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">ColorRgbaFloat</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">_int255_to_float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">color_rgba</span><span class="p">))</span>  <span class="c1"># type: ignore</span>


<span class="k">def</span> <span class="nf">color_rgb_float_to_color_rgb</span><span class="p">(</span><span class="n">color_rgb_float</span><span class="p">:</span> <span class="n">ColorRgbFloat</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ColorRgb</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">ColorRgb</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">_float_to_int255</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">color_rgb_float</span><span class="p">))</span>  <span class="c1"># type: ignore</span>


<span class="k">def</span> <span class="nf">color_rgba_float_to_color_rgba</span><span class="p">(</span><span class="n">color_rgba_float</span><span class="p">:</span> <span class="n">ColorRgbaFloat</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ColorRgba</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">ColorRgba</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">_float_to_int255</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">color_rgba_float</span><span class="p">))</span>  <span class="c1"># type: ignore</span>


<span class="k">def</span> <span class="nf">color_rgb_to_color_rgba</span><span class="p">(</span><span class="n">color_rgb</span><span class="p">:</span> <span class="n">ColorRgb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ColorRgba</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">ColorRgba</span><span class="p">(</span><span class="n">color_rgb</span> <span class="o">+</span> <span class="p">(</span><span class="mi">255</span><span class="p">,))</span>


<span class="k">def</span> <span class="nf">color_rgb_float_to_color_rgba_float</span><span class="p">(</span><span class="n">color_rgb_float</span><span class="p">:</span> <span class="n">ColorRgbFloat</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ColorRgbaFloat</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">ColorRgbaFloat</span><span class="p">(</span><span class="n">color_rgb_float</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,))</span>
</pre></div>
</div></div>
</div>
<p><em>Example: using color types in function</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">fiatlight.fiat_types</span> <span class="kn">import</span> <span class="n">ColorRgb</span><span class="p">,</span> <span class="n">ColorRgba</span>

<span class="k">def</span> <span class="nf">color_chooser</span><span class="p">(</span><span class="n">color1</span><span class="p">:</span> <span class="n">ColorRgb</span><span class="p">,</span> <span class="n">color2</span><span class="p">:</span> <span class="n">ColorRgba</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;You selected: </span><span class="si">{</span><span class="n">color1</span><span class="si">=}</span><span class="s2">, </span><span class="si">{</span><span class="n">color2</span><span class="si">=}</span><span class="s2">&quot;</span>

<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">color_chooser</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Color Chooser&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/96aee6bec90dbf31404d09b7ff6b228249a9429663d8ff6b184bcc9f15746f6f.png" src="_images/96aee6bec90dbf31404d09b7ff6b228249a9429663d8ff6b184bcc9f15746f6f.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="optional-types">
<h1>Optional types<a class="headerlink" href="#optional-types" title="Link to this heading">#</a></h1>
<p>If a type is registered, its optional version is also registered.</p>
<p><em>Example: using an optional color in a function</em></p>
<p>(In this example, the user needs to click on “Set” to set a value to the optional color)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">fiatlight.fiat_types</span> <span class="kn">import</span> <span class="n">ColorRgb</span><span class="p">,</span> <span class="n">ColorRgba</span>

<span class="k">def</span> <span class="nf">color_chooser</span><span class="p">(</span><span class="n">color</span><span class="p">:</span> <span class="n">ColorRgb</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;You selected: </span><span class="si">{</span><span class="n">color</span><span class="si">=}</span><span class="s2">&quot;</span>

<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">color_chooser</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Optional Color&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a08c015f11ac1ab014bbe2cfccc160dfb946523ca305f4f1439f27c44c812858.png" src="_images/a08c015f11ac1ab014bbe2cfccc160dfb946523ca305f4f1439f27c44c812858.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="lists">
<h1>Lists<a class="headerlink" href="#lists" title="Link to this heading">#</a></h1>
<p>A very basic support is provided for lists. It does not allow to edit the values.
However, it can present a list of values using (all of them will be rendered as string using str() function).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">fiatlight.fiat_types</span> <span class="kn">import</span> <span class="n">TextPath</span>

<span class="k">def</span> <span class="nf">list_words_in_file</span><span class="p">(</span><span class="n">filenames</span><span class="p">:</span> <span class="n">TextPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">list_words_in_file</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;List Words in File&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/7ac713b9b45b8bedea28a51fd1ad8c4c9de8a891dd8e201be4988c0a55aacf7f.png" src="_images/7ac713b9b45b8bedea28a51fd1ad8c4c9de8a891dd8e201be4988c0a55aacf7f.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="enum-classes">
<h1>Enum classes<a class="headerlink" href="#enum-classes" title="Link to this heading">#</a></h1>
<p>Enum classes are automatically associated to a GUI.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>

<span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">Red</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">Green</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">Blue</span> <span class="o">=</span> <span class="mi">3</span>

<span class="k">def</span> <span class="nf">color_chooser</span><span class="p">(</span><span class="n">color</span><span class="p">:</span> <span class="n">Color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;You selected: </span><span class="si">{</span><span class="n">color</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">color_chooser</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Enum Color&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a77c26c7309b1eb8734bf9c60a3fc46003175f6ad0a9584e0ca04d012958ff1d.png" src="_images/a77c26c7309b1eb8734bf9c60a3fc46003175f6ad0a9584e0ca04d012958ff1d.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="dataclasses">
<h1>Dataclasses<a class="headerlink" href="#dataclasses" title="Link to this heading">#</a></h1>
<p>Dataclasses can easily be registered with their GUI.</p>
<p><em>Note: Fiatlight is unable to auto-generate a serialization/deserialization mechanism for dataclasses.
If you need this, it is advised to use Pydantic models instead.</em></p>
<p><em>Example: using a dataclass in a function</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="c1"># Using a decorator to register the dataclass with its GUI</span>
<span class="nd">@fl</span><span class="o">.</span><span class="n">dataclass_with_gui_registration</span><span class="p">(</span><span class="n">age__range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">120</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>

<span class="c1"># Note: it is also possible to register the dataclass with the commented line below</span>
<span class="c1">#    fl.register_dataclass(Person)</span>

<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">person</span><span class="p">:</span> <span class="n">Person</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hello </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, you are </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">age</span><span class="si">}</span><span class="s2"> years old.&quot;</span>

<span class="c1"># Note: this app *will not* remember the values of the dataclass fields between runs</span>
<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">greet</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Dataclass Person&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/3071ac24f7e1bfa1a49e3cab3faed9efe6f05ed8c29ac3f37d7870ff415ef6fb.png" src="_images/3071ac24f7e1bfa1a49e3cab3faed9efe6f05ed8c29ac3f37d7870ff415ef6fb.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="pydantic-models">
<h1>Pydantic models<a class="headerlink" href="#pydantic-models" title="Link to this heading">#</a></h1>
<p>Pydantic models can easily be registered with their GUI.</p>
<p><em>Notes:</em></p>
<ul class="simple">
<li><p><em>fiatlight will automatically generate a serialization/deserialization mechanism for Pydantic models, so that user entries can be saved and reloaded.</em></p></li>
<li><p><em>models can be nested: in the example below, you will see 3 levels of nesting, and fiatlight will generate a nice GUI for those nestings.</em></p></li>
</ul>
<p><em>Example: using a Pydantic model in a function</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">fiatlight.fiat_types</span> <span class="kn">import</span> <span class="n">ImagePath</span>
<span class="kn">from</span> <span class="nn">fiatlight.fiat_kits.fiat_image</span> <span class="kn">import</span> <span class="n">ImageU8_3</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># An Enum which will associated to a Gui automatically</span>
<span class="k">class</span> <span class="nc">TrainingDataType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">Test</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
    <span class="n">Train</span> <span class="o">=</span> <span class="s2">&quot;train&quot;</span>
    <span class="n">Validation</span> <span class="o">=</span> <span class="s2">&quot;validation&quot;</span>


<span class="c1"># A Pydantic model with a GUI decorator, and custom attributes for the fields</span>
<span class="nd">@fl</span><span class="o">.</span><span class="n">base_model_with_gui_registration</span><span class="p">(</span><span class="n">latitude__range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">),</span> <span class="n">longitude__range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">GeographicInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">latitude</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">longitude</span><span class="p">:</span> <span class="nb">float</span>

<span class="c1"># Note: it is also possible to register the Pydantic model with the commented line below</span>
<span class="c1">#     fl.register_base_model(GeographicInfo)</span>


<span class="c1"># A second model, which nests the first one (GeographicInfo)</span>
<span class="nd">@fl</span><span class="o">.</span><span class="n">base_model_with_gui_registration</span><span class="p">(</span><span class="n">width__range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2000</span><span class="p">),</span> <span class="n">height__range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2000</span><span class="p">))</span>
<span class="k">class</span> <span class="nc">ImageInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">geo_info</span><span class="p">:</span> <span class="n">GeographicInfo</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span>

<span class="c1"># A third model, which nests the second one (ImageInfo)</span>
<span class="c1"># In total, it has 3 levels: TrainingImage -&gt; ImageInfo -&gt; GeographicInfo</span>
<span class="nd">@fl</span><span class="o">.</span><span class="n">base_model_with_gui_registration</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">TrainingImage</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">image_path</span><span class="p">:</span> <span class="n">ImagePath</span>
    <span class="n">data_type</span><span class="p">:</span> <span class="n">TrainingDataType</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ImageInfo</span>

<span class="c1"># Our function that uses the Pydantic model:</span>
<span class="c1"># we ought to see a nice GUI with 3 levels of nesting</span>
<span class="k">def</span> <span class="nf">process_image</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">TrainingImage</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ImageU8_3</span><span class="p">]:</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">image_path</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">image_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">basename</span><span class="p">,</span> <span class="n">img</span>

<span class="c1"># Note: this app *will* remember the values of the Pydantic model fields between runs</span>
<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">process_image</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Pydantic Image Model&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b4a03778e5147097e3206f24cff212af3ffe60013a14e1efafa033ac6120591e.png" src="_images/b4a03778e5147097e3206f24cff212af3ffe60013a14e1efafa033ac6120591e.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="custom-types-registration">
<h1>Custom types registration<a class="headerlink" href="#custom-types-registration" title="Link to this heading">#</a></h1>
<p>By calling <code class="docutils literal notranslate"><span class="pre">fiatlight.register_type(DataType,</span> <span class="pre">DataTypeWithGui)</span></code>, it is possible to register a custom type with its GUI.</p>
<p>For a given type’s GUI, it is possible to customize many aspects. Basically all the callbacks and options inside <a class="reference internal" href="any_data_gui_callbacks.html"><span class="std std-doc">AnyDataGuiCallbacks</span></a> can be customized.</p>
<section id="example-1-a-customizable-normal-distribution-type">
<h2>Example 1: a customizable Normal Distribution type<a class="headerlink" href="#example-1-a-customizable-normal-distribution-type" title="Link to this heading">#</a></h2>
<p><strong>Step 1: Define the Custom Type</strong></p>
<p>First, let’s define a new type called NormalDistribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NormalDistribution</span><span class="p">:</span>
    <span class="n">mean</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">stddev</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mean</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">stddev</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">mean</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stddev</span> <span class="o">=</span> <span class="n">stddev</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Step 2: Create a Class to Handle the Custom Type</strong></p>
<p>Next, we create a class NormalDistributionWithGui that extends AnyDataWithGui and defines the custom presentation and editing logic for the NormalDistribution type.</p>
<p>It will handle:</p>
<ul class="simple">
<li><p>A custom GUI for editing the NormalDistribution type</p></li>
<li><p>A custom GUI for presenting the NormalDistribution type
(using a cached figure, which is updated when the distribution changes)</p></li>
<li><p>Serialization and deserialization of the custom type</p></li>
<li><p>A default value provider</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fiatlight</span> <span class="k">as</span> <span class="nn">fl</span>
<span class="kn">from</span> <span class="nn">imgui_bundle</span> <span class="kn">import</span> <span class="n">imgui</span><span class="p">,</span> <span class="n">imgui_fig</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">class</span> <span class="nc">NormalDistributionWithGui</span><span class="p">(</span><span class="n">fl</span><span class="o">.</span><span class="n">AnyDataWithGui</span><span class="p">[</span><span class="n">NormalDistribution</span><span class="p">]):</span>
    <span class="c1"># Cached figure for the distribution plot</span>
    <span class="n">figure</span><span class="p">:</span> <span class="n">Figure</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># boolean to indicate if the figure image should be refreshed</span>
    <span class="n">shall_refresh_figure_image</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">NormalDistribution</span><span class="p">)</span>

        <span class="c1"># Edit and present callbacks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">edit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_gui</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">present</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_present_gui</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">present_str</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Normal Distrib: Mean=</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">mean</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, StdDev=</span><span class="si">{</span><span class="n">value</span><span class="o">.</span><span class="n">stddev</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Default value provider</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">default_value_provider</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">NormalDistribution</span><span class="p">()</span>

        <span class="c1"># Serialization of the custom type</span>
        <span class="c1"># (note it would be automatic if we used a Pydantic model)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">save_to_dict</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">value</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;mean&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="s2">&quot;stddev&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">stddev</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">load_from_dict</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">data</span><span class="p">:</span> <span class="n">NormalDistribution</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;mean&quot;</span><span class="p">],</span> <span class="n">stddev</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;stddev&quot;</span><span class="p">])</span>

        <span class="c1"># Callback for handling changes: we need to subscribe to this event</span>
        <span class="c1"># in order to update the self.figure when the distribution changes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">on_change</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_change</span>

    <span class="k">def</span> <span class="nf">_on_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">NormalDistribution</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># remember to close the previous figure to avoid memory leaks</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>

        <span class="c1"># Create the figure</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">mean</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">value</span><span class="o">.</span><span class="n">stddev</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">mean</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">value</span><span class="o">.</span><span class="n">stddev</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">stddev</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">value</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span> <span class="o">/</span> <span class="n">value</span><span class="o">.</span><span class="n">stddev</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">figure</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Normal Distribution&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Density&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Cache the figure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">figure</span>

        <span class="c1"># Indicate that the figure image should be refreshed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shall_refresh_figure_image</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_edit_gui</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">NormalDistribution</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">NormalDistribution</span><span class="p">]:</span>
        <span class="c1"># Note: we receive the current value and return a tuple with</span>
        <span class="c1"># a boolean indicating if the value was modified</span>
        <span class="n">modified</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">imgui</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;Edit Normal Distribution:&quot;</span><span class="p">)</span>
        <span class="n">imgui</span><span class="o">.</span><span class="n">set_next_item_width</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">changed</span><span class="p">,</span> <span class="n">new_mean</span> <span class="o">=</span> <span class="n">imgui</span><span class="o">.</span><span class="n">slider_float</span><span class="p">(</span><span class="s2">&quot;Mean&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">changed</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">new_mean</span>
            <span class="n">modified</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">imgui</span><span class="o">.</span><span class="n">set_next_item_width</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">changed</span><span class="p">,</span> <span class="n">new_stddev</span> <span class="o">=</span> <span class="n">imgui</span><span class="o">.</span><span class="n">slider_float</span><span class="p">(</span><span class="s2">&quot;StdDev&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">stddev</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">changed</span><span class="p">:</span>
            <span class="n">value</span><span class="o">.</span><span class="n">stddev</span> <span class="o">=</span> <span class="n">new_stddev</span>
            <span class="n">modified</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">modified</span><span class="p">,</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_present_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_value</span><span class="p">:</span> <span class="n">NormalDistribution</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># We do not use the value which was passed as a parameter as we use the cached Figure</span>
        <span class="c1"># which was updated in the _on_change callback</span>
        <span class="n">imgui_fig</span><span class="o">.</span><span class="n">fig</span><span class="p">(</span><span class="s2">&quot;Normal Distribution&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">,</span> <span class="n">refresh_image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shall_refresh_figure_image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shall_refresh</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Step 3: Register the type</strong></p>
<p>Finally, we register the custom type with its GUI, simply by calling the register_type function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fl</span><span class="o">.</span><span class="n">register_type</span><span class="p">(</span><span class="n">NormalDistribution</span><span class="p">,</span> <span class="n">NormalDistributionWithGui</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>From now on, the NormalDistribution type will be associated with the NormalDistributionWithGui GUI:
any function that uses NormalDistribution as a parameter or as a return type will automatically have a GUI for editing and presenting the NormalDistribution type.</p>
<p><strong>Step 4: Use the custom type in a function</strong></p>
<p>In this example, our function simply returns the NormalDistribution instance that was passed to it.
In the screenshot, you can see the “edit” callback in action in the Param edition section, and the “present” callback in the Output section.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">distribution</span><span class="p">:</span> <span class="n">NormalDistribution</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NormalDistribution</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">distribution</span>

<span class="n">fl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Normal Distribution&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ec9970ec36a482cbc1631540b84bba005ed19088006e6b946abcd30772137ac1.png" src="_images/ec9970ec36a482cbc1631540b84bba005ed19088006e6b946abcd30772137ac1.png" />
</div>
</div>
</section>
<section id="example-2-a-length-type-with-imperial-units">
<h2>Example 2: a Length type with imperial units<a class="headerlink" href="#example-2-a-length-type-with-imperial-units" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 1: Define the custom type for which we want to create a GUI</span>
<span class="c1"># =================================================================</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NewType</span>

<span class="n">Length</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Length&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>

<span class="c1"># Step 2: Create a class to handle the custom type</span>
<span class="c1"># ================================================</span>
<span class="kn">import</span> <span class="nn">fiatlight</span>
<span class="kn">from</span> <span class="nn">fiatlight</span> <span class="kn">import</span> <span class="n">AnyDataWithGui</span>
<span class="kn">from</span> <span class="nn">fiatlight.fiat_widgets</span> <span class="kn">import</span> <span class="n">fontawesome_6_ctx</span><span class="p">,</span> <span class="n">icons_fontawesome_6</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NewType</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span>
<span class="kn">from</span> <span class="nn">imgui_bundle</span> <span class="kn">import</span> <span class="n">imgui</span><span class="p">,</span> <span class="n">hello_imgui</span><span class="p">,</span> <span class="n">imgui_ctx</span><span class="p">,</span> <span class="n">ImVec4</span>


<span class="c1"># The specific GUI for our custom type</span>
<span class="k">class</span> <span class="nc">LengthWithGui</span><span class="p">(</span><span class="n">AnyDataWithGui</span><span class="p">[</span><span class="n">Length</span><span class="p">]):</span>
    <span class="n">use_imperial_units</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">Length</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">edit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit</span>  <span class="c1"># A custom callback for editing the data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">present</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_present</span>  <span class="c1"># A custom callback for presenting the data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">present_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_present_str</span>  <span class="c1"># A custom callback for presenting the data as a short string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">default_value_provider</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">Length</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># A custom callback for providing a default value</span>
        <span class="c1"># custom callback for saving the GUI options (here, we save the imperial units option)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">save_gui_options_to_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_gui_options_to_json</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">load_gui_options_from_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_gui_options_from_json</span>

    <span class="k">def</span> <span class="nf">_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Length</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">Length</span><span class="p">]:</span>
        <span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_imperial_units</span> <span class="o">=</span> <span class="n">imgui</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="s2">&quot;Imperial&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_imperial_units</span><span class="p">)</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.3g</span><span class="s2"> m&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_imperial_units</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="si">%.3g</span><span class="s2"> yd&quot;</span>
        <span class="n">value_unit</span> <span class="o">=</span> <span class="n">value</span> <span class="o">*</span> <span class="mf">1.09361</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_imperial_units</span> <span class="k">else</span> <span class="n">value</span>
        <span class="n">imgui</span><span class="o">.</span><span class="n">set_next_item_width</span><span class="p">(</span><span class="n">hello_imgui</span><span class="o">.</span><span class="n">em_size</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
        <span class="n">changed</span><span class="p">,</span> <span class="n">new_value_unit</span> <span class="o">=</span> <span class="n">imgui</span><span class="o">.</span><span class="n">slider_float</span><span class="p">(</span>
            <span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="n">value_unit</span><span class="p">,</span> <span class="mf">1e-5</span><span class="p">,</span> <span class="mf">1e11</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">imgui</span><span class="o">.</span><span class="n">SliderFlags_</span><span class="o">.</span><span class="n">logarithmic</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">changed</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Length</span><span class="p">(</span><span class="n">new_value_unit</span> <span class="o">/</span> <span class="mf">1.09361</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_imperial_units</span> <span class="k">else</span> <span class="n">new_value_unit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">changed</span><span class="p">,</span> <span class="n">value</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_present_str</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Length</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> m&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_present</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">Length</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">fontawesome_6_ctx</span><span class="p">():</span>
            <span class="n">yd</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">Length</span><span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="mf">1.09361</span><span class="p">))</span>
            <span class="n">inches</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">Length</span><span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="mf">1.09361</span> <span class="o">-</span> <span class="n">yd</span><span class="p">)</span> <span class="o">*</span> <span class="mi">36</span><span class="p">))</span>
            <span class="n">bananas</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span> <span class="o">/</span> <span class="mf">0.2</span><span class="p">)</span>
            <span class="n">imgui</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Length: </span><span class="si">{</span><span class="n">yd</span><span class="si">}</span><span class="s2"> yd </span><span class="si">{</span><span class="n">inches</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> in (aka </span><span class="si">{</span><span class="n">bananas</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">imgui</span><span class="o">.</span><span class="n">same_line</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">imgui_ctx</span><span class="o">.</span><span class="n">push_style_color</span><span class="p">(</span><span class="n">imgui</span><span class="o">.</span><span class="n">Col_</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">ImVec4</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)):</span>
                <span class="n">imgui</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">icons_fontawesome_6</span><span class="o">.</span><span class="n">ICON_FA_CARROT</span><span class="p">)</span>
            <span class="n">imgui</span><span class="o">.</span><span class="n">same_line</span><span class="p">()</span>
            <span class="n">imgui</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_save_gui_options_to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;use_imperial_units&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_imperial_units</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_load_gui_options_from_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_imperial_units</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;use_imperial_units&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>


<span class="c1"># Step 3: Register the custom type with its GUI</span>
<span class="c1"># ==============================================</span>
<span class="kn">from</span> <span class="nn">fiatlight</span> <span class="kn">import</span> <span class="n">register_type</span>

<span class="n">register_type</span><span class="p">(</span><span class="n">Length</span><span class="p">,</span> <span class="n">LengthWithGui</span><span class="p">)</span>


<span class="c1"># Step 4: Use the custom type in a function</span>
<span class="c1"># =========================================</span>
<span class="c1"># A function that uses our custom type</span>
<span class="k">def</span> <span class="nf">circle_perimeter</span><span class="p">(</span><span class="n">radius</span><span class="p">:</span> <span class="n">Length</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Length</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">Length</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mf">3.14159</span> <span class="o">*</span> <span class="n">radius</span><span class="p">)</span>


<span class="c1"># Run the function with the GUI</span>
<span class="n">fiatlight</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circle_perimeter</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;Circle Perimeter in banana units&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/5f9bb586b48116ac9383454da346c159fd770a54284f5a78c865b4ceaa1349ab.png" src="_images/5f9bb586b48116ac9383454da346c159fd770a54284f5a78c865b4ceaa1349ab.png" />
</div>
</div>
</section>
<section id="example-3-a-sound-player">
<h2>Example 3: a sound player<a class="headerlink" href="#example-3-a-sound-player" title="Link to this heading">#</a></h2>
<p>The sound wave player also uses a custom type with a GUI.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fiatlight.fiat_kits.experimental.fiat_audio_simple</span> <span class="kn">import</span> <span class="n">sound_wave_player_gui_demo</span>
<span class="n">sound_wave_player_gui_demo</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ec0beb705245c7b14b4ffbb5fb81e76a0b35c1d28b24fad0dc53122e14bbc94a.png" src="_images/ec0beb705245c7b14b4ffbb5fb81e76a0b35c1d28b24fad0dc53122e14bbc94a.png" />
</div>
</div>
<p>For more info, see its <a class="reference external" href="https://github.com/pthom/fiatlight/blob/refact_io/src/python/fiatlight/fiat_kits/experimental/fiat_audio_simple/sound_wave_player_gui.py">source code</a>).</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="full-code">
<h1>Full code<a class="headerlink" href="#full-code" title="Link to this heading">#</a></h1>
<p>Browse the <a class="reference internal" href="#"><span class="doc std std-doc">full code</span></a> of fiat_togui online.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="functions_graph.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">FunctionsGraph</p>
      </div>
    </a>
    <a class="right-next"
       href="fiat_kits.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Fiatlight Kits</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Gui Registry &amp; Custom Types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#explore-the-registry">Explore the registry</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#primitive-types">Primitive types</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-example">Basic example</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-with-custom-gui-options">Example with custom GUI options</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#range-limited-numeric-types">Range limited numeric types</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#file-name-types">File name types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#color-types">Color types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#optional-types">Optional types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#lists">Lists</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enum-classes">Enum classes</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dataclasses">Dataclasses</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pydantic-models">Pydantic models</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-types-registration">Custom types registration</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-a-customizable-normal-distribution-type">Example 1: a customizable Normal Distribution type</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-a-length-type-with-imperial-units">Example 2: a Length type with imperial units</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-3-a-sound-player">Example 3: a sound player</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#full-code">Full code</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Pascal Thomet
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>